DASHBOARD_REQUESTS = {
    "real_time": {
        "cycle_200ms": [
            {
                "name": "essential_metrics",
                "method": "block_read",
                "addresses": [36, 38, 46, 48, 50],
                "pre_calc": {
                    "power": "reg36 * reg38",
                    "soc_percent": "reg46 * 0.002",
                    "temp_c": "reg48 * 0.1"
                },
                "storage": "ram_cache + websocket",
                "retention": "30_minutes_ram"
            }
        ]
    },
    
    "detailed_data": {
        "cycle_1s": [
            {
                "name": "cell_voltages", 
                "method": "block_read",
                "addresses": list(range(16)),  # 0-15
                "pre_calc": {
                    "cell_v_min": "min(reg0..reg15) * 0.1",
                    "cell_v_max": "max(reg0..reg15) * 0.1", 
                    "cell_v_avg": "mean(reg0..reg15) * 0.1",
                    "cell_imbalance": "max(reg0..reg15) - min(reg0..reg15)"
                },
                "storage": "ram_cache + circular_buffer_1h",
                "retention": "1_hour_ram + 24h_sd"
            },
            {
                "name": "balancing_status",
                "method": "block_read", 
                "addresses": [51, 52, 53],
                "pre_calc": {
                    "cells_need_balance": "count_bits_set(reg51)",
                    "cells_balancing": "count_bits_set(reg52)",
                    "active_cells": "reg53"
                },
                "storage": "ram_cache",
                "retention": "10_minutes_ram"
            }
        ]
    },
    
    "statistics": {
        "cycle_5s": [
            {
                "name": "performance_stats",
                "method": "block_read",
                "addresses": [100, 102, 103, 32, 113],
                "pre_calc": {
                    "total_km": "reg100 * 0.01",
                    "max_discharge_a": "reg102 * 0.1", 
                    "max_charge_a": "reg103 * 0.1",
                    "uptime_hours": "reg32 / 3600",
                    "temp_range": f"{reg113_low}°C to {reg113_high}°C"
                },
                "storage": "flash_stats + database",
                "retention": "permanent"
            }
        ],
        "cycle_60s": [
            {
                "name": "historical_trends",
                "method": "aggregate_block", 
                "addresses": [36, 38, 46, 48, 40, 41],
                "pre_calc": {
                    "voltage_5min_avg": "moving_average(reg36, 300s)",
                    "current_5min_avg": "moving_average(reg38, 300s)",
                    "soc_trend": "linear_regression(reg46, 600s)",
                    "temp_trend": "linear_regression(reg48, 600s)",
                    "cell_spread_avg": "moving_average(reg41-reg40, 300s)"
                },
                "storage": "circular_buffer_24h + database",
                "retention": "24h_ram + permanent_db"
            }
        ]
    }
}